"use strict";var Toolbelt;(function(n){var t;(function(n){var t=function(){function n(){this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"><\/div><\/div><\/div>';this.loadingBarContainer=null;this.loadingBar=null;this.startSize=.02;this.started=!1;this.progress=0;this.latencyThreshold=100;this.reqsTotal=0;this.reqsCompleted=0;this.startTimer={handle:null};this.incrementTimer={handle:null};this.completeTimer={handle:null}}return n.prototype.constructDOM=function(){document.body.insertAdjacentHTML("afterbegin",this.loadingBarTemplate);this.loadingBarContainer=document.getElementById("loading-bar");this.loadingBarContainer!=null&&(this.loadingBar=this.loadingBarContainer.getElementsByClassName("bar")[0])},n.prototype.beginLoading=function(){var n=this;this.reqsTotal===0&&this.setTimeout(this.startTimer,function(){return n.start()},this.latencyThreshold);this.reqsTotal++;this.setProgress(this.reqsCompleted/this.reqsTotal)},n.prototype.endLoading=function(){this.reqsCompleted++;this.reqsCompleted>=this.reqsTotal?this.complete():this.setProgress(this.reqsCompleted/this.reqsTotal)},n.prototype.start=function(){(this.clearTimeout(this.completeTimer),this.started)||(this.started=!0,this.loadingBar!=null&&this.loadingBar.classList.add("in-progress"),this.setProgress(this.startSize,{enableTransition:!1}))},n.prototype.complete=function(){var n=this;this.reqsTotal=0;this.reqsCompleted=0;this.clearTimeout(this.startTimer);this.setProgress(1);this.setTimeout(this.completeTimer,function(){n.loadingBar!=null&&n.loadingBar.classList.remove("in-progress");n.progress=0;n.started=!1},500)},n.prototype.setProgress=function(n,t){var i=this;(t===void 0&&(t={enableTransition:!0}),this.started)&&(this.progress=n,this.loadingBar!=null&&(t.enableTransition?this.loadingBar.classList.remove("no-trans"):this.loadingBar.classList.add("no-trans"),this.loadingBar.style.width=n*100+"%"),this.setTimeout(this.incrementTimer,function(){return i.incrementProgress()},250))},n.prototype.incrementProgress=function(){var t,n,i;this.progress>=1||(t=0,n=this.progress,t=n>=0&&n<.25?(Math.random()*3+3)/100:n>=.25&&n<.65?Math.random()*3/100:n>=.65&&n<.9?Math.random()/50:n>=.9&&n<.99?.005:0,i=this.progress+t,this.setProgress(i))},n.prototype.setTimeout=function(n,t,i){n.handle!==null&&clearTimeout(n.handle);n.handle=setTimeout(function(){n.handle=null;t()},i)},n.prototype.clearTimeout=function(n){n.handle!==null&&(clearTimeout(n.handle),n.handle=null)},n}();n.LoadingBarClass=t;n.loadingBar=new t})(t=n.Blazor||(n.Blazor={}))})(Toolbelt||(Toolbelt={}));